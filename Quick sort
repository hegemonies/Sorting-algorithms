#include <stdio.h>
#include <stdlib.h>
#include <time.h>

void swap(int *a, int *b){
	int tmp = *a;
	*a = *b;
	*b = tmp;
}

void q_sort(int array[], int left, int right){
	int l = left;//создание копий переменных, с которыми будем работать
	int r = right;
	int tmp = left + right / 2;//вычисляем центр, на который будем опираться.
	int center = array[tmp];
	//Цикл, начинающий сортировку.
	do {
		while(array[r] > center) 
			r--; //поиск значения больше центра
		while(array[l] < center)
			l++; //поиск значения меньше центра	
		if(l <= r){//проверка счетчиков. если true, swap их.
			if(array[l] > array[r]){
				swap(&array[r], &array[l]);
			}
			//перевод счетчиков на след элемнты
			l++;
			r--;
		}
	} while(l <= r);
	if(r > left)//если true, рекурсия
		q_sort(array, left, r);//массив, исходное начало и текущий окнец
	if(l < right)//ny, rekursiya, ti ponal
		q_sort(array, l, right);//массив, текущее начало и конец
	
}

int main(void){
	srand(time(0));
	int n = 5; //size of array
	//int array[] = {9, 5, 4, 6, 3, 2, 1, 7, 8, 0};
	int array[n];
	int i;
	for(i = 0; i < n; i++){
		array[i] = rand() % 10;
		printf("%d:%d\n", i, array[i]);
	}
	q_sort(array, 0, n - 1);
	for(i = 0; i < n - 1; i++){
		printf("%d:%d\n", i + 1, array[i]);
	}
}
